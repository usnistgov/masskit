
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>masskit.utils package &#8212; masskit 1.1.0-8-g811254f documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nature.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css">
  <script src="https://code.jquery.com/jquery-1.12.4.min.js" type="text/javascript"></script>
  <script src="https://pages.nist.gov/nist-header-footer/js/nist-header-footer.js" type="text/javascript" defer="defer"></script>


<script type="text/javascript" src="https://pages.nist.gov/leaveNotice/js/jquery.leaveNotice-nist.min.js"></script>
<script>
$(document).ready(function(){
  // Mark external (non-nist.gov) A tags with class "external"
  //If the adress start with https and ends with nist.gov
  var re_nist = new RegExp('^https?:\/\/((^\/)*\.)*nist\\.gov(\/|$)');
  //Regex to find address that start with https
  var re_absolute_address = new RegExp('^((https?:)?\/\/)');
  $("a").each(function(){
    var url=$(this).attr('href');
    if(re_nist.test(url) || !re_absolute_address.test(url)){
      $(this).addClass('local');
    }else{
      //This a href appears to be external, so tag it
      $(this).addClass('external');
    }
  });
  // Add leaveNotice to external A elements
  $('a.external').leaveNotice();
});
</script>
<link rel="stylesheet" type="text/css" href="https://pages.nist.gov/leaveNotice/css/jquery.leaveNotice.css" />


  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">masskit 1.1.0-8-g811254f documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">masskit.utils package</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="masskit-utils-package">
<h1>masskit.utils package<a class="headerlink" href="#masskit-utils-package" title="Permalink to this heading">¶</a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this heading">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="masskit.utils.textalloc.html">masskit.utils.textalloc package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="masskit.utils.textalloc.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="masskit.utils.textalloc.html#module-masskit.utils.textalloc.candidates">masskit.utils.textalloc.candidates module</a></li>
<li class="toctree-l2"><a class="reference internal" href="masskit.utils.textalloc.html#module-masskit.utils.textalloc.non_overlapping_boxes">masskit.utils.textalloc.non_overlapping_boxes module</a></li>
<li class="toctree-l2"><a class="reference internal" href="masskit.utils.textalloc.html#module-masskit.utils.textalloc.overlap_functions">masskit.utils.textalloc.overlap_functions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="masskit.utils.textalloc.html#module-masskit.utils.textalloc">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading">¶</a></h2>
</section>
<section id="module-masskit.utils.arrow">
<span id="masskit-utils-arrow-module"></span><h2>masskit.utils.arrow module<a class="headerlink" href="#module-masskit.utils.arrow" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.arrow.create_object_id">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.arrow.</span></span><span class="sig-name descname"><span class="pre">create_object_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.arrow.create_object_id" title="Permalink to this definition">¶</a></dt>
<dd><p>create an object id based on filename and filters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – filename</p></li>
<li><p><strong>filters</strong> – filter string</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>object id</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.arrow.save_to_arrow">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.arrow.</span></span><span class="sig-name descname"><span class="pre">save_to_arrow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tempdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.arrow.save_to_arrow" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a parquet file and save it as a temp arrow file after applying
filters and column lists.  Load it as a memmap if the temp arrow file
already exists</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – parquet file</p></li>
<li><p><strong>columns</strong> – columns to load</p></li>
<li><p><strong>filters</strong> – parquet file filters</p></li>
<li><p><strong>tempdir</strong> – tempdir to use for memmap, otherwise use python default</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ArrowLibraryMap</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-masskit.utils.files">
<span id="masskit-utils-files-module"></span><h2>masskit.utils.files module<a class="headerlink" href="#module-masskit.utils.files" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.files.BatchFileReader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">BatchFileReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">PathLike</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment_fields</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_column_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mol_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.BatchFileReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.files.BatchFileReader.iter_tables">
<span class="sig-name descname"><span class="pre">iter_tables</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Table</span></span></span><a class="headerlink" href="#masskit.utils.files.BatchFileReader.iter_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>read batch generator, returns a Table</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.files.BatchFileWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">BatchFileWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">PathLike</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.BatchFileWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.files.BatchFileWriter.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.BatchFileWriter.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the writer. Essential to avoid race conditions with threaded writers.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.files.BatchFileWriter.write_table">
<span class="sig-name descname"><span class="pre">write_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Table</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#masskit.utils.files.BatchFileWriter.write_table" title="Permalink to this definition">¶</a></dt>
<dd><p>write a table out</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>table</strong> – table to write</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.files.MzTab_Reader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">MzTab_Reader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dedup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decoy_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.MzTab_Reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for reading an mzTab file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – stream or filename</p></li>
<li><p><strong>dedup</strong> – Only take the first row with a given hit_id</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.files.MzTab_Reader.get_hitlist">
<span class="sig-name descname"><span class="pre">get_hitlist</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.MzTab_Reader.get_hitlist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.files.MzTab_Reader.parse_metadata">
<span class="sig-name descname"><span class="pre">parse_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.MzTab_Reader.parse_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.files.MzTab_Reader.parse_psm">
<span class="sig-name descname"><span class="pre">parse_psm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.MzTab_Reader.parse_psm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.files.MzTab_Reader.parse_psm_row">
<span class="sig-name descname"><span class="pre">parse_psm_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.MzTab_Reader.parse_psm_row" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.files.MzTab_Reader.read_sections">
<span class="sig-name descname"><span class="pre">read_sections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.MzTab_Reader.read_sections" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.add_row_to_records">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">add_row_to_records</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">records</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.add_row_to_records" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.create_table_with_mod_dict">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">create_table_with_mod_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">records</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.create_table_with_mod_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.empty_records">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">empty_records</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.empty_records" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.get_progress">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">get_progress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.get_progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a fp pointer, return best possible progress meter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fp</strong> – name of the file to read or a file object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.load_csv2array">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">load_csv2array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suppress_rdkit_warnings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_column_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mol_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smiles_column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.load_csv2array" title="Permalink to this definition">¶</a></dt>
<dd><p>read in csv file with SMILES in one column and convert to an arrow table
SMILES are standardized and converted into an rdkit Mol object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – name of the file to read or a file object</p></li>
<li><p><strong>id_field</strong> – integer value that is the start of the id values. If none, no id field is created</p></li>
<li><p><strong>suppress_rdkit_warnings</strong> – don’t print out spurious rdkit warnings</p></li>
<li><p><strong>no_column_headers</strong> – the csv has no headers.  In that case, the columns are labeled f0, f1, …</p></li>
<li><p><strong>mol_column_name</strong> – name of the rdkit Mol column in the output table</p></li>
<li><p><strong>smiles_column_name</strong> – the name of the SMILES column. default is “SMILES” or “f0” if no headers</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>arrow table</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.load_mgf2array">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">load_mgf2array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_probabilities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.01,</span> <span class="pre">0.97,</span> <span class="pre">0.01,</span> <span class="pre">0.01)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_entries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.load_mgf2array" title="Permalink to this definition">¶</a></dt>
<dd><p>Read stream in MGF format and return as Pandas data frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – stream or filename</p></li>
<li><p><strong>num</strong> – the maximum number of records to generate (0=all)</p></li>
<li><p><strong>id_field</strong> – the spectrum id to begin with</p></li>
<li><p><strong>set_probabilities</strong> – how to divide into dev, train, valid, test</p></li>
<li><p><strong>row_entries</strong> – dict containing additional row columns</p></li>
<li><p><strong>title_fields</strong> – dict containing column names with corresponding regex to extract field values from the TITLE regex match group 1 is the value</p></li>
<li><p><strong>min_intensity</strong> – the minimum intensity to set the fingerprint bit</p></li>
<li><p><strong>spectrum_type</strong> – the type of spectrum file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>one dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.load_msp2array">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">load_msp2array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.load_msp2array" title="Permalink to this definition">¶</a></dt>
<dd><p>Read stream or filename in MSP format and return as pyarrow Table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – stream or filename</p></li>
<li><p><strong>num</strong> – the maximum number of records to generate (None=all)</p></li>
<li><p><strong>id_field</strong> – the spectrum id to begin with</p></li>
<li><p><strong>title_fields</strong> – dict containing column names with corresponding regex to extract field values from the TITLE. regex match group 1 is the value</p></li>
<li><p><strong>comment_fields</strong> – a Dict of regexes used to extract fields from the Comment field.  Form of the Dict is { comment_field_name: (regex, type, field_name)}.  For example {‘Filter’:(r’&#64;hcd(d+.?d* )’, float, ‘nce’)}</p></li>
<li><p><strong>min_intensity</strong> – the minimum intensity to set the fingerprint bit</p></li>
<li><p><strong>spectrum_type</strong> – type of spectrum file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>arrow table</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.load_mzTab">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">load_mzTab</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dedup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decoy_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.load_mzTab" title="Permalink to this definition">¶</a></dt>
<dd><p>Read file in SDF format and return an array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – stream or filename</p></li>
<li><p><strong>dedup</strong> – Only take the first row with a given hit_id</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.load_sdf2array">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">load_sdf2array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_expensive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_field_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precursor_mass_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">product_mass_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_probabilities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.01,</span> <span class="pre">0.97,</span> <span class="pre">0.01,</span> <span class="pre">0.01)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suppress_rdkit_warnings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.load_sdf2array" title="Permalink to this definition">¶</a></dt>
<dd><p>Read file in SDF format and return as Lists of Dicts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – ForwardSDMolSupplier iterator</p></li>
<li><p><strong>max_size</strong> – the maximum bounding box size (used to filter out large molecules. 0=no bound)</p></li>
<li><p><strong>num</strong> – the maximum number of records to generate (None=all)</p></li>
<li><p><strong>source</strong> – where did the sdf come from?  pubchem, nist, ?</p></li>
<li><p><strong>precursor_mass_info</strong> – mass information for precursor. if None, will use default.</p></li>
<li><p><strong>product_mass_info</strong> – mass information for product. if None, will use default.</p></li>
<li><p><strong>skip_expensive</strong> – skip expensive calculations for better perf</p></li>
<li><p><strong>id_field</strong> – field to use for the mol id, such as NISTNO, ID or _NAME (the sdf title field). if integer, use the value as the starting value for the id and increment for each spectrum</p></li>
<li><p><strong>id_field_type</strong> – the id field type, such as int or str</p></li>
<li><p><strong>min_intensity</strong> – the minimum intensity to set the fingerprint bit</p></li>
<li><p><strong>set_probabilities</strong> – how to divide into dev, train, valid, test</p></li>
<li><p><strong>suppress_rdkit_warnings</strong> – don’t print out spurious rdkit warnings</p></li>
<li><p><strong>spectrum_type</strong> – the type of spectrum file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>arrow table with records</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.load_smiles2array">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">load_smiles2array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_expensive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suppress_rdkit_warnings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.load_smiles2array" title="Permalink to this definition">¶</a></dt>
<dd><p>Read file of SMILES and return pyarrow table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – name of the file to read or a file object</p></li>
<li><p><strong>num</strong> – the maximum number of records to generate (None=all)</p></li>
<li><p><strong>skip_expensive</strong> – skip expensive calculations for better perf</p></li>
<li><p><strong>id_field</strong> – field to use for the mol id, such as NISTNO, ID or _NAME (the sdf title field). if integer, use the value as the starting value for the id and increment for each spectrum</p></li>
<li><p><strong>suppress_rdkit_warnings</strong> – don’t print out spurious rdkit warnings</p></li>
<li><p><strong>spectrum_type</strong> – the type of spectrum file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>arrow table with records</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.mol2row">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">mol2row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_expensive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span></span></span><a class="headerlink" href="#masskit.utils.files.mol2row" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an rdkit Mol into a row</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mol</strong> – the molecule</p></li>
<li><p><strong>max_size</strong> – the maximum bounding box size (used to filter out large molecules. 0=no bound)</p></li>
<li><p><strong>skip_expensive</strong> – skip expensive calculations for better perf</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>row as dict, mol</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.parse_energy">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">parse_energy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.parse_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>parse energy field that has nce or collision_energy in it</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.parse_glycopeptide_annot">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">parse_glycopeptide_annot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">annots</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">peak_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.parse_glycopeptide_annot" title="Permalink to this definition">¶</a></dt>
<dd><p>take a glycopeptide annotation string like “Y0-H2O+i/-18.2ppm,Y0-NH3/7.6ppm 22 23” and parse it.
this function is not complete.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>annots</strong> – the annotation string</p></li>
<li><p><strong>peak_index</strong> – the index of the peak with the annotation in the mz array</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the parsed values in an array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.read_parquet">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">read_parquet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.read_parquet" title="Permalink to this definition">¶</a></dt>
<dd><p>reads a PyArrow table from a parquet file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – stream or filename</p></li>
<li><p><strong>columns</strong> – list of columns to remy_sdf.parquetad, None=all</p></li>
<li><p><strong>filters</strong> – parquet predicate as a list of tuples</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>PyArrow table</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.records2table">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">records2table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">records</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.records2table" title="Permalink to this definition">¶</a></dt>
<dd><p>convert a flat table with spectral records into a table with a nested spectrum</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>records</strong> – records to be added to a table</p></li>
<li><p><strong>spectrum_type</strong> – which type of spectrum</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.seek_size">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">seek_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.seek_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.spectra_to_array">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">spectra_to_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spectra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_starts_stops</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.spectra_to_array" title="Permalink to this definition">¶</a></dt>
<dd><p>convert an array-like of spectra to an arrow_table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spectra</strong> – iteratable containing the spectrums</p></li>
<li><p><strong>min_intensity</strong> – the minimum intensity to set the fingerprint bit</p></li>
<li><p><strong>write_starts_stops</strong> – put the starts and stops arrays into the arrow Table</p></li>
<li><p><strong>spectrum_type</strong> – the type of spectrum file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>arrow table of spectra</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.files.write_parquet">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.files.</span></span><span class="sig-name descname"><span class="pre">write_parquet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.files.write_parquet" title="Permalink to this definition">¶</a></dt>
<dd><p>save a PyArrow table to a parquet file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table</strong> – the dataframe</p></li>
<li><p><strong>fp</strong> – stream or filename</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-masskit.utils.fingerprints">
<span id="masskit-utils-fingerprints-module"></span><h2>masskit.utils.fingerprints module<a class="headerlink" href="#module-masskit.utils.fingerprints" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.ECFPFingerprint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.fingerprints.</span></span><span class="sig-name descname"><span class="pre">ECFPFingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4096</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.ECFPFingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.fingerprints.Fingerprint" title="masskit.utils.fingerprints.Fingerprint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fingerprint</span></code></a></p>
<p>rdkit version of ECFP fingerprint for a small molecule structure</p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.ECFPFingerprint.from_bitvec">
<span class="sig-name descname"><span class="pre">from_bitvec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.ECFPFingerprint.from_bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>create fingerprint from rdkit ExplicitBitVect</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>DataStructs.ExplicitBitVect</em>) – input ExplicitBitVect</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.ECFPFingerprint.from_numpy">
<span class="sig-name descname"><span class="pre">from_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.ECFPFingerprint.from_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>create fingerprint from numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>np.ndarray</em>) – input numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.ECFPFingerprint.object2fingerprint">
<span class="sig-name descname"><span class="pre">object2fingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.ECFPFingerprint.object2fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>convert an object into a fingerprint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>object</em>) – the object to convert to a fingerprint</p></li>
<li><p><strong>dtype</strong> (<em>np.dtype</em>) – data type of output array</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.ECFPFingerprint.to_bitvec">
<span class="sig-name descname"><span class="pre">to_bitvec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.ECFPFingerprint.to_bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>convert fingerprint to rdkit ExplicitBitVect</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the fingerprint</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>DataStructs.ExplicitBitVect</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.ECFPFingerprint.to_numpy">
<span class="sig-name descname"><span class="pre">to_numpy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.ECFPFingerprint.to_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>convert fingerprint to numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the fingerprint</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.Fingerprint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.fingerprints.</span></span><span class="sig-name descname"><span class="pre">Fingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stride</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">256</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.Fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>class for encapsulating and calculating a fingerprint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dimension</strong> (<em>int</em>) – size of the fingerprint (includes other features like counts</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.Fingerprint.bitvec2numpy">
<span class="sig-name descname"><span class="pre">bitvec2numpy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.Fingerprint.bitvec2numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>version of to_numpy used when fingerprint is a bitvec</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.Fingerprint.from_bitvec">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_bitvec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.Fingerprint.from_bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>create fingerprint from rdkit ExplicitBitVect</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>DataStructs.ExplicitBitVect</em>) – input ExplicitBitVect</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.Fingerprint.from_numpy">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.Fingerprint.from_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>create fingerprint from numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>np.ndarray</em>) – input numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.Fingerprint.get_num_on_bits">
<span class="sig-name descname"><span class="pre">get_num_on_bits</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.Fingerprint.get_num_on_bits" title="Permalink to this definition">¶</a></dt>
<dd><p>retrieve the number of nonzero features</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.Fingerprint.numpy2bitvec">
<span class="sig-name descname"><span class="pre">numpy2bitvec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.Fingerprint.numpy2bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>version of from_numpy used when fingerprint is a bitvec</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> – the fingerprint as a numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.Fingerprint.object2fingerprint">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">object2fingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.Fingerprint.object2fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>convert an object into a fingerprint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>object</em>) – the object to convert to a fingerprint</p></li>
<li><p><strong>dtype</strong> (<em>np.dtype</em>) – data type of output array</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.Fingerprint.size">
<span class="sig-name descname"><span class="pre">size</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#masskit.utils.fingerprints.Fingerprint.size" title="Permalink to this definition">¶</a></dt>
<dd><p>size of the fingerprint in bytes, where the size is a multiple of the stride</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>size of fingerprint</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.Fingerprint.to_bitvec">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">to_bitvec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.Fingerprint.to_bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>convert fingerprint to rdkit ExplicitBitVect</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the fingerprint</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>DataStructs.ExplicitBitVect</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.Fingerprint.to_numpy">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">to_numpy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.Fingerprint.to_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>convert fingerprint to numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the fingerprint</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.MolFingerprint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.fingerprints.</span></span><span class="sig-name descname"><span class="pre">MolFingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4096</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.MolFingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>class for encapsulating and calculating a molecule fingerprint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dimension</strong> (<em>int</em>) – size of the fingerprint (includes other features like counts</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.MolFingerprint.from_bitvec">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_bitvec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.MolFingerprint.from_bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>create fingerprint from rdkit ExplicitBitVect</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>DataStructs.ExplicitBitVect</em>) – input ExplicitBitVect</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.MolFingerprint.from_numpy">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.MolFingerprint.from_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>create fingerprint from numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>np.ndarray</em>) – input numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.MolFingerprint.object2fingerprint">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">object2fingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.MolFingerprint.object2fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>convert an object into a fingerprint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>object</em>) – the object to convert to a fingerprint</p></li>
<li><p><strong>dtype</strong> (<em>np.dtype</em>) – data type of output array</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.MolFingerprint.to_bitvec">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">to_bitvec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.MolFingerprint.to_bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>convert fingerprint to rdkit ExplicitBitVect</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the fingerprint</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>DataStructs.ExplicitBitVect</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.MolFingerprint.to_numpy">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">to_numpy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.MolFingerprint.to_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>convert fingerprint to numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the fingerprint</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumFingerprint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.fingerprints.</span></span><span class="sig-name descname"><span class="pre">SpectrumFingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_bin_left</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumFingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.fingerprints.Fingerprint" title="masskit.utils.fingerprints.Fingerprint"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fingerprint</span></code></a></p>
<p>base class for spectrum fingerprint</p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumFingerprint.from_bitvec">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_bitvec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumFingerprint.from_bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>create fingerprint from rdkit ExplicitBitVect</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>DataStructs.ExplicitBitVect</em>) – input ExplicitBitVect</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumFingerprint.from_numpy">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumFingerprint.from_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>create fingerprint from numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>np.ndarray</em>) – input numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumFingerprint.object2fingerprint">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">object2fingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumFingerprint.object2fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>convert an object into a fingerprint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>object</em>) – the object to convert to a fingerprint</p></li>
<li><p><strong>dtype</strong> (<em>np.dtype</em>) – data type of output array</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumFingerprint.to_bitvec">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">to_bitvec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumFingerprint.to_bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>convert fingerprint to rdkit ExplicitBitVect</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the fingerprint</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>DataStructs.ExplicitBitVect</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumFingerprint.to_numpy">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">to_numpy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumFingerprint.to_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>convert fingerprint to numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the fingerprint</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumFloatFingerprint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.fingerprints.</span></span><span class="sig-name descname"><span class="pre">SpectrumFloatFingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mz_ratio</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumFloatFingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.fingerprints.SpectrumFingerprint" title="masskit.utils.fingerprints.SpectrumFingerprint"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpectrumFingerprint</span></code></a></p>
<p>create a spectral fingerprint that also contains a count by powers of two, skipping 1.  In other words,
the count bits are set if the number of peaks exceeds &gt;=2, &gt;=4, …</p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumFloatFingerprint.from_bitvec">
<span class="sig-name descname"><span class="pre">from_bitvec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumFloatFingerprint.from_bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>create fingerprint from rdkit ExplicitBitVect</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>DataStructs.ExplicitBitVect</em>) – input ExplicitBitVect</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumFloatFingerprint.from_numpy">
<span class="sig-name descname"><span class="pre">from_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumFloatFingerprint.from_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>create fingerprint from numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>np.ndarray</em>) – input numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumFloatFingerprint.object2fingerprint">
<span class="sig-name descname"><span class="pre">object2fingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumFloatFingerprint.object2fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>fill out an array of fixed size with the ions.  note that this func assumes spectra sorted by mz</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumFloatFingerprint.to_bitvec">
<span class="sig-name descname"><span class="pre">to_bitvec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumFloatFingerprint.to_bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>convert fingerprint to rdkit ExplicitBitVect</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the fingerprint</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>DataStructs.ExplicitBitVect</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumFloatFingerprint.to_numpy">
<span class="sig-name descname"><span class="pre">to_numpy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumFloatFingerprint.to_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>convert fingerprint to numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the fingerprint</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumTanimotoFingerPrint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.fingerprints.</span></span><span class="sig-name descname"><span class="pre">SpectrumTanimotoFingerPrint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumTanimotoFingerPrint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.fingerprints.SpectrumFingerprint" title="masskit.utils.fingerprints.SpectrumFingerprint"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpectrumFingerprint</span></code></a></p>
<p>create a spectral tanimoto fingerprint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dimension</strong> – overall dimension of fingerprint</p></li>
<li><p><strong>bin_size</strong> – size of each bin</p></li>
<li><p><strong>first_bin_left</strong> – the position of the first bin left side</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumTanimotoFingerPrint.from_bitvec">
<span class="sig-name descname"><span class="pre">from_bitvec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumTanimotoFingerPrint.from_bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>create fingerprint from rdkit ExplicitBitVect</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>DataStructs.ExplicitBitVect</em>) – input ExplicitBitVect</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumTanimotoFingerPrint.from_numpy">
<span class="sig-name descname"><span class="pre">from_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumTanimotoFingerPrint.from_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>create fingerprint from numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>array</strong> (<em>np.ndarray</em>) – input numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumTanimotoFingerPrint.object2fingerprint">
<span class="sig-name descname"><span class="pre">object2fingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumTanimotoFingerPrint.object2fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>convert an object into a fingerprint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>object</em>) – the object to convert to a fingerprint</p></li>
<li><p><strong>dtype</strong> (<em>np.dtype</em>) – data type of output array</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumTanimotoFingerPrint.to_bitvec">
<span class="sig-name descname"><span class="pre">to_bitvec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumTanimotoFingerPrint.to_bitvec" title="Permalink to this definition">¶</a></dt>
<dd><p>convert fingerprint to rdkit ExplicitBitVect</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the fingerprint</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>DataStructs.ExplicitBitVect</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.SpectrumTanimotoFingerPrint.to_numpy">
<span class="sig-name descname"><span class="pre">to_numpy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.SpectrumTanimotoFingerPrint.to_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>convert fingerprint to numpy array</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the fingerprint</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.calc_bit">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.fingerprints.</span></span><span class="sig-name descname"><span class="pre">calc_bit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_mz_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance_in</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.calc_bit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.calc_dynamic_fingerprint">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.fingerprints.</span></span><span class="sig-name descname"><span class="pre">calc_dynamic_fingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spectrum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_mz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mz_window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">14</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_mz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hybrid_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.calc_dynamic_fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>create a fingerprint created from the top max_rank peaks and the OR of the fingerprint of the top
peaks, where each fingerprint is shifted by the mz of one of the top peaks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spectrum</strong> – input spectrum</p></li>
<li><p><strong>max_mz</strong> – maximum mz used for the fingerprint</p></li>
<li><p><strong>tolerance</strong> – mass tolerance to use</p></li>
<li><p><strong>min_intensity</strong> – minimum intensity to allow for creating the fingerprint</p></li>
<li><p><strong>mz_window</strong> – noise filter mz window</p></li>
<li><p><strong>min_mz</strong> – minimum mz to use</p></li>
<li><p><strong>max_rank</strong> – the maximum rank used for the fingerprint</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the fingerprint</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.calc_interval_fingerprint">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.fingerprints.</span></span><span class="sig-name descname"><span class="pre">calc_interval_fingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spectrum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_mz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mz_window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">14</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_mz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">peaks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.calc_interval_fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>create a pairwise interval fingerprint from the filtered peaks of a spectrum</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spectrum</strong> – input spectrum</p></li>
<li><p><strong>max_mz</strong> – maximum mz used for the fingerprint</p></li>
<li><p><strong>tolerance</strong> – mass tolerance to use</p></li>
<li><p><strong>min_intensity</strong> – minimum intensity to allow for creating the fingerprint</p></li>
<li><p><strong>mz_window</strong> – noise filter mz window</p></li>
<li><p><strong>min_mz</strong> – minimum mz to use</p></li>
<li><p><strong>peaks</strong> – a list of additional mz values to use for creating the intervals</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the fingerprint</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.fingerprints.fingerprint_search_numpy">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.fingerprints.</span></span><span class="sig-name descname"><span class="pre">fingerprint_search_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_fingerprint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fingerprint_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tanimoto_cutoff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_fingerprint_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fingerprint_array_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.fingerprints.fingerprint_search_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>return a list of fingerprint hits to a query fingerprint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_fingerprint</strong> – query fingerprint</p></li>
<li><p><strong>fingerprint_array</strong> – array-like list of fingerprints</p></li>
<li><p><strong>tanimoto_cutoff</strong> – Tanimoto cutoff</p></li>
<li><p><strong>query_fingerprint_count</strong> – number of bits set in query</p></li>
<li><p><strong>fingerprint_array_count</strong> – number of bits set in array fingerprints</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>tanimoto scores (if below threshold, set to 0.0)</p>
</dd>
</dl>
<p>Notes: numba doesn’t work with arrays of objects.  pyarrow creates a numpy array of objects, where each object
is a numpy array.  even arrow fixed size lists do this.  fixedbinary uses byte objects.</p>
</dd></dl>

</section>
<section id="module-masskit.utils.general">
<span id="masskit-utils-general-module"></span><h2>masskit.utils.general module<a class="headerlink" href="#module-masskit.utils.general" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.general.class_for_name">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.general.</span></span><span class="sig-name descname"><span class="pre">class_for_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_name_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.general.class_for_name" title="Permalink to this definition">¶</a></dt>
<dd><p>dynamically try to find class in list of modules
:param module_name_list: list of modules to search
:param class_name: class to look for
:return: class</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.general.discounted_cumulative_gain">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.general.</span></span><span class="sig-name descname"><span class="pre">discounted_cumulative_gain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">relevance_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.general.discounted_cumulative_gain" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.general.get_file">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.general.</span></span><span class="sig-name descname"><span class="pre">get_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tgz_extension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.general.get_file" title="Permalink to this definition">¶</a></dt>
<dd><p>for a given file, return the path (downloading file if necessary)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – name of the file</p></li>
<li><p><strong>cache_directory</strong> – where files are cached (config.paths.cache_directory)</p></li>
<li><p><strong>search_path</strong> – list of where to search for files (config.paths.search_path)</p></li>
<li><p><strong>tgz_extension</strong> – if a tgz file to be downloaded, the extension of the unarchived file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>path</p>
</dd>
</dl>
<p>Notes: we don’t support zip files as the python api for zip files doesn’t support symlinks</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.general.open_if_compressed">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.general.</span></span><span class="sig-name descname"><span class="pre">open_if_compressed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.general.open_if_compressed" title="Permalink to this definition">¶</a></dt>
<dd><p>open the file denoted by filename and uncompress it if it is compressed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – filename</p></li>
<li><p><strong>mode</strong> – file opening mode</p></li>
<li><p><strong>newline</strong> – specify newline character</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>stream</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.general.open_if_filename">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.general.</span></span><span class="sig-name descname"><span class="pre">open_if_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.general.open_if_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>if the fp is a string, open the file, and uncompress if needed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – possible filename</p></li>
<li><p><strong>mode</strong> – file opening mode</p></li>
<li><p><strong>newline</strong> – specify newline character</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>stream</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.general.parse_filename">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.general.</span></span><span class="sig-name descname"><span class="pre">parse_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.general.parse_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>parse filename into root and extension</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> – filename</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>root, extension</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.general.search_for_file">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.general.</span></span><span class="sig-name descname"><span class="pre">search_for_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directories</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.general.search_for_file" title="Permalink to this definition">¶</a></dt>
<dd><p>look for a file in a list of directories</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – the filename to look for</p></li>
<li><p><strong>directories</strong> – the directories to search</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the Path to the file, otherwise None if not found</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-masskit.utils.hitlist">
<span id="masskit-utils-hitlist-module"></span><h2>masskit.utils.hitlist module<a class="headerlink" href="#module-masskit.utils.hitlist" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.hitlist.CompareRecallDCG">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.hitlist.</span></span><span class="sig-name descname"><span class="pre">CompareRecallDCG</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.CompareRecallDCG" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.hitlist.HitlistCompare" title="masskit.utils.hitlist.HitlistCompare"><code class="xref py py-class docutils literal notranslate"><span class="pre">HitlistCompare</span></code></a></p>
<p>compare two hitlists by ranking the scores and computing the recall and discounted cumulative gain
at several subsets of the hit list
with different lengths.  The recall values consist of the number of hits in each subset in the compare hitlist
that have a rank equal to or better than the ground truth hitlist.</p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.hitlist.CompareRecallDCG.compare">
<span class="sig-name descname"><span class="pre">compare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">compare_hitlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truth_hitlist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recall_values_in</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.CompareRecallDCG.compare" title="Permalink to this definition">¶</a></dt>
<dd><p>compare hitlist to a ground truth hitlist.  Rank according to scores, then compute recall.
the ranking applied is min ranking, where a group of hits that are tied are given a rank as if there had been
one member of the group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>compare_hitlist</strong> – Hitlist to compare to</p></li>
<li><p><strong>truth_hitlist</strong> – Hitlist that serves as ground truth</p></li>
<li><p><strong>recall_values_in</strong> – lengths of the hitlist subsets used to calculate recall. [1, 3, 10] by default</p></li>
<li><p><strong>rank_method</strong> – what method to use to do ranking? “min” is default</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.hitlist.CosineScore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.hitlist.</span></span><span class="sig-name descname"><span class="pre">CosineScore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hit_table_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_table_map</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">score_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.CosineScore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.hitlist.Score" title="masskit.utils.hitlist.Score"><code class="xref py py-class docutils literal notranslate"><span class="pre">Score</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.hitlist.CosineScore.score">
<span class="sig-name descname"><span class="pre">score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hitlist</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.CosineScore.score" title="Permalink to this definition">¶</a></dt>
<dd><p>do the scoring on the hitlist</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hitlist</strong> (<a class="reference internal" href="#masskit.utils.hitlist.Hitlist" title="masskit.utils.hitlist.Hitlist"><em>Hitlist</em></a>) – the hitlist to score</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.hitlist.Hitlist">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.hitlist.</span></span><span class="sig-name descname"><span class="pre">Hitlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hitlist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.Hitlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>base class for a list of hits from a search</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hitlist</strong> (<em>pandas.DataFrame</em>) – the hitlist</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.hitlist.Hitlist.get_query_ids">
<span class="sig-name descname"><span class="pre">get_query_ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.Hitlist.get_query_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>return list of unique query ids</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>query ids</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.int64</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="masskit.utils.hitlist.Hitlist.hitlist">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hitlist</span></span><a class="headerlink" href="#masskit.utils.hitlist.Hitlist.hitlist" title="Permalink to this definition">¶</a></dt>
<dd><p>get the hitlist as a pandas dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the hitlist</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.hitlist.Hitlist.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.Hitlist.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.hitlist.Hitlist.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.Hitlist.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.hitlist.Hitlist.sort">
<span class="sig-name descname"><span class="pre">sort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">score</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ascending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.Hitlist.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>sort the hitlist per query</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>score</strong> – name of the score.  default is cosine_score</p></li>
<li><p><strong>ascending</strong> – should the score be ascending</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.hitlist.Hitlist.to_pandas">
<span class="sig-name descname"><span class="pre">to_pandas</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.Hitlist.to_pandas" title="Permalink to this definition">¶</a></dt>
<dd><p>get hitlist as a pandas dataframe</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.hitlist.HitlistCompare">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.hitlist.</span></span><span class="sig-name descname"><span class="pre">HitlistCompare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comparison_score</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truth_score</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comparison_score_ascending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truth_score_ascending</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comparison_score_rank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truth_score_rank</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.HitlistCompare" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>base class for comparing two hitlists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comparison_score</strong> – the column name of the score to compare to ground truth, ‘cosine_score’ default</p></li>
<li><p><strong>truth_score</strong> – the column name of the ground truth score, default same as comparison score</p></li>
<li><p><strong>comparison_score_ascending</strong> – is the comparison score ascending?</p></li>
<li><p><strong>truth_score_ascending</strong> – is the ground truth score ascending?</p></li>
<li><p><strong>comparison_score_rank</strong> – what is the column name of the rank of the comparison score, default appends
_rank to comparison_score</p></li>
<li><p><strong>truth_score_rank</strong> – what is the column name of the rank of the truth score, default appends _rank to
truth_score</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.hitlist.HitlistCompare.compare">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">compare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">compare_hitlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truth_hitlist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recall_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.HitlistCompare.compare" title="Permalink to this definition">¶</a></dt>
<dd><p>compare hitlist to a ground truth hitlist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>compare_hitlist</strong> – Hitlist to compare to</p></li>
<li><p><strong>truth_hitlist</strong> – Hitlist that serves as ground truth</p></li>
<li><p><strong>recall_values</strong> – lengths of the hitlist subsets used to calculate recall. [1, 3, 10] by default</p></li>
<li><p><strong>rank_method</strong> – what method to use to do ranking? “min” is default</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.hitlist.IdentityRecall">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.hitlist.</span></span><span class="sig-name descname"><span class="pre">IdentityRecall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.IdentityRecall" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.hitlist.HitlistCompare" title="masskit.utils.hitlist.HitlistCompare"><code class="xref py py-class docutils literal notranslate"><span class="pre">HitlistCompare</span></code></a></p>
<p>examing a hitlist with an identity colum and compute the recall</p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.hitlist.IdentityRecall.compare">
<span class="sig-name descname"><span class="pre">compare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">compare_hitlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recall_values_in</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.IdentityRecall.compare" title="Permalink to this definition">¶</a></dt>
<dd><p>compute recall of compare hitlist</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>compare_hitlist</strong> – Hitlist that serves as ground truth</p></li>
<li><p><strong>recall_values_in</strong> – lengths of the hitlist subsets used to calculate recall. [1, 3, 10] by default</p></li>
<li><p><strong>rank_method</strong> – what method to use to do ranking? “min” is default</p></li>
<li><p><strong>identity_column</strong> – column name of the identity column</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.hitlist.PeptideIdentityScore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.hitlist.</span></span><span class="sig-name descname"><span class="pre">PeptideIdentityScore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">score_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.PeptideIdentityScore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.hitlist.Score" title="masskit.utils.hitlist.Score"><code class="xref py py-class docutils literal notranslate"><span class="pre">Score</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.hitlist.PeptideIdentityScore.score">
<span class="sig-name descname"><span class="pre">score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hitlist</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.PeptideIdentityScore.score" title="Permalink to this definition">¶</a></dt>
<dd><p>do the scoring on the hitlist</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hitlist</strong> (<a class="reference internal" href="#masskit.utils.hitlist.Hitlist" title="masskit.utils.hitlist.Hitlist"><em>Hitlist</em></a>) – the hitlist to score</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.hitlist.Score">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.hitlist.</span></span><span class="sig-name descname"><span class="pre">Score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hit_table_map</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_table_map</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">score_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.Score" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>base class for scoring a hitlist</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hit_table_map</strong> (<a class="reference internal" href="#masskit.utils.tablemap.TableMap" title="masskit.utils.tablemap.TableMap"><em>TableMap</em></a>) – a TableMap for the hits</p></li>
<li><p><strong>query_table_map</strong> (<a class="reference internal" href="#masskit.utils.tablemap.TableMap" title="masskit.utils.tablemap.TableMap"><em>TableMap</em></a>) – a TableMap for the queries.  uses hit_table_map if set to None</p></li>
<li><p><strong>score_name</strong> (<em>str</em>) – the name of the score</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.hitlist.Score.score">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hitlist</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.Score.score" title="Permalink to this definition">¶</a></dt>
<dd><p>do the scoring on the hitlist</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hitlist</strong> (<a class="reference internal" href="#masskit.utils.hitlist.Hitlist" title="masskit.utils.hitlist.Hitlist"><em>Hitlist</em></a>) – the hitlist to score</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.hitlist.TanimotoScore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.hitlist.</span></span><span class="sig-name descname"><span class="pre">TanimotoScore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hit_table_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_table_map</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">score_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hit_fingerprint_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_fingerprint_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.TanimotoScore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.hitlist.Score" title="masskit.utils.hitlist.Score"><code class="xref py py-class docutils literal notranslate"><span class="pre">Score</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.hitlist.TanimotoScore.score">
<span class="sig-name descname"><span class="pre">score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hitlist</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.hitlist.TanimotoScore.score" title="Permalink to this definition">¶</a></dt>
<dd><p>do the scoring on the hitlist</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hitlist</strong> (<a class="reference internal" href="#masskit.utils.hitlist.Hitlist" title="masskit.utils.hitlist.Hitlist"><em>Hitlist</em></a>) – the hitlist to score</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-masskit.utils.index">
<span id="masskit-utils-index-module"></span><h2>masskit.utils.index module<a class="headerlink" href="#module-masskit.utils.index" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.index.BruteForceIndex">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.index.</span></span><span class="sig-name descname"><span class="pre">BruteForceIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fingerprint_factory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.BruteForceIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.index.Index" title="masskit.utils.index.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a></p>
<p>search a library by brute force spectrum matching</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dimension</strong> – the number of features in the fingerprint (ignored)</p></li>
<li><p><strong>fingerprint_factory</strong> – class used to encapsulate the fingerprint</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.BruteForceIndex.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.BruteForceIndex.create" title="Permalink to this definition">¶</a></dt>
<dd><p>create index from a TableMap</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_map</strong> – the library to index</p></li>
<li><p><strong>column_name</strong> – name of the column containing the objects to index.  None=’spectrum’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.BruteForceIndex.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.BruteForceIndex.load" title="Permalink to this definition">¶</a></dt>
<dd><p>load the index</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> – name of the file to load the fingerprint in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.BruteForceIndex.optimize">
<span class="sig-name descname"><span class="pre">optimize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.BruteForceIndex.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>optimize the index</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.BruteForceIndex.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.BruteForceIndex.save" title="Permalink to this definition">¶</a></dt>
<dd><p>save the index</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> – name of file to save fingerprint in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.BruteForceIndex.search">
<span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hitlist_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_raw_score</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_list_query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.BruteForceIndex.search" title="Permalink to this definition">¶</a></dt>
<dd><p>search a series of query objects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>objects</strong> – the query objects to be searched or their fingerprints</p></li>
<li><p><strong>hitlist_size</strong> – the size of the hitlist returned</p></li>
<li><p><strong>epsilon</strong> – max search accuracy error</p></li>
<li><p><strong>with_raw_score</strong> – calculate and return the raw_score</p></li>
<li><p><strong>id_list</strong> – array-like for converting row numbers in search results to hit ids</p></li>
<li><p><strong>id_list_query</strong> – array-like for converting row numbers in search results to query ids</p></li>
<li><p><strong>predicate</strong> – filter array that is the result of a predicate query</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.index.DescentIndex">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.index.</span></span><span class="sig-name descname"><span class="pre">DescentIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_name=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimension=2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fingerprint_factory=&lt;class</span> <span class="pre">'masskit.utils.fingerprints.SpectrumFloatFingerprint'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DescentIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.index.Index" title="masskit.utils.index.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a></p>
<p>pynndescent index for a fingerprint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dimension</strong> – the number of features in the fingerprint</p></li>
<li><p><strong>fingerprint_factory</strong> – class used to encapsulate the fingerprint</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.DescentIndex.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DescentIndex.create" title="Permalink to this definition">¶</a></dt>
<dd><p>create index from a TableMap</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_map</strong> – the library to index</p></li>
<li><p><strong>column_name</strong> – name of the column containing the objects to index.  None=’spectrum’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.DescentIndex.create_from_fingerprint">
<span class="sig-name descname"><span class="pre">create_from_fingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fingerprint_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ecfp4'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fingerprint_count_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ecfp4_count'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DescentIndex.create_from_fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>create the index from a table column containing a binary fingerprint or feature vector</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_map</strong> – TableMap that contains the arrow table</p></li>
<li><p><strong>fingerprint_column</strong> – name of the fingerprint column, defaults to ‘ecfp4’</p></li>
<li><p><strong>fingerprint_count_column</strong> – name of the fingerprint count column, defaults to ‘ecfp4_count’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.DescentIndex.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DescentIndex.load" title="Permalink to this definition">¶</a></dt>
<dd><p>load the index</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> – name of the file to load the fingerprint in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.DescentIndex.optimize">
<span class="sig-name descname"><span class="pre">optimize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DescentIndex.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>optimize the index</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.DescentIndex.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DescentIndex.save" title="Permalink to this definition">¶</a></dt>
<dd><p>save the index</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> – name of file to save fingerprint in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.DescentIndex.search">
<span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hitlist_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_raw_score</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_list_query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DescentIndex.search" title="Permalink to this definition">¶</a></dt>
<dd><p>search a series of query objects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>objects</strong> – the query objects to be searched or their fingerprints</p></li>
<li><p><strong>hitlist_size</strong> – the size of the hitlist returned</p></li>
<li><p><strong>epsilon</strong> – max search accuracy error</p></li>
<li><p><strong>with_raw_score</strong> – calculate and return the raw_score</p></li>
<li><p><strong>id_list</strong> – array-like for converting row numbers in search results to hit ids</p></li>
<li><p><strong>id_list_query</strong> – array-like for converting row numbers in search results to query ids</p></li>
<li><p><strong>predicate</strong> – filter array that is the result of a predicate query</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.index.DotProductIndex">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.index.</span></span><span class="sig-name descname"><span class="pre">DotProductIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fingerprint_factory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DotProductIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.index.Index" title="masskit.utils.index.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a></p>
<p>brute force search of feature vectors using cosine score</p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.DotProductIndex.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_map</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DotProductIndex.create" title="Permalink to this definition">¶</a></dt>
<dd><p>create index from a TableMap</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_map</strong> – the library to index</p></li>
<li><p><strong>column_name</strong> – name of the column containing the objects to index.  None=’spectrum’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.DotProductIndex.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DotProductIndex.load" title="Permalink to this definition">¶</a></dt>
<dd><p>load the index</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> – name of the file to load the fingerprint in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.DotProductIndex.optimize">
<span class="sig-name descname"><span class="pre">optimize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DotProductIndex.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>optimize the index</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.DotProductIndex.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DotProductIndex.save" title="Permalink to this definition">¶</a></dt>
<dd><p>save the index</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> – name of file to save fingerprint in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.DotProductIndex.search">
<span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hitlist_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_list_query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.DotProductIndex.search" title="Permalink to this definition">¶</a></dt>
<dd><p>search feature vectors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>objects</strong> – feature vector or list of feature vectors to be queried</p></li>
<li><p><strong>hitlist_size</strong> – _description_, defaults to 50</p></li>
<li><p><strong>epsilon</strong> – _description_, defaults to 0.1</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>_description_</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.index.Index">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.index.</span></span><span class="sig-name descname"><span class="pre">Index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimension</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fingerprint_factory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.Index" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>Index used for searching a library</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dimension</strong> – the number of features in the fingerprint</p></li>
<li><p><strong>fingerprint_factory</strong> – class used to encapsulate the</p></li>
<li><p><strong>index_name</strong> – name of index</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.Index.create">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.Index.create" title="Permalink to this definition">¶</a></dt>
<dd><p>create index from a TableMap</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_map</strong> – the library to index</p></li>
<li><p><strong>column_name</strong> – name of the column containing the objects to index.  None=’spectrum’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.Index.load">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.Index.load" title="Permalink to this definition">¶</a></dt>
<dd><p>load the index</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> – name of the file to load the fingerprint in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.Index.optimize">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">optimize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.Index.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>optimize the index</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.Index.save">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.Index.save" title="Permalink to this definition">¶</a></dt>
<dd><p>save the index</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> – name of file to save fingerprint in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.Index.search">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hitlist_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_raw_score</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_list_query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.Index.search" title="Permalink to this definition">¶</a></dt>
<dd><p>search a series of query objects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>objects</strong> – the query objects to be searched or their fingerprints</p></li>
<li><p><strong>hitlist_size</strong> – the size of the hitlist returned</p></li>
<li><p><strong>epsilon</strong> – max search accuracy error</p></li>
<li><p><strong>with_raw_score</strong> – calculate and return the raw_score</p></li>
<li><p><strong>id_list</strong> – array-like for converting row numbers in search results to hit ids</p></li>
<li><p><strong>id_list_query</strong> – array-like for converting row numbers in search results to query ids</p></li>
<li><p><strong>predicate</strong> – filter array that is the result of a predicate query</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.Index.spectrum2array">
<span class="sig-name descname"><span class="pre">spectrum2array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spectrum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectral_array_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel_in=0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff=0.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.Index.spectrum2array" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.index.TanimotoIndex">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.index.</span></span><span class="sig-name descname"><span class="pre">TanimotoIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_name=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimension=4096</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fingerprint_factory=&lt;class</span> <span class="pre">'masskit.utils.fingerprints.SpectrumTanimotoFingerPrint'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.TanimotoIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.index.Index" title="masskit.utils.index.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a></p>
<p>brute force search index of binary fingerprints</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dimension</strong> – the number of features in the fingerprint</p></li>
<li><p><strong>fingerprint_factory</strong> – class used to encapsulate the fingerprint</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.TanimotoIndex.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.TanimotoIndex.create" title="Permalink to this definition">¶</a></dt>
<dd><p>create index from a TableMap</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_map</strong> – the library to index</p></li>
<li><p><strong>column_name</strong> – name of the column containing the objects to index.  None=’spectrum’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.TanimotoIndex.create_from_fingerprint">
<span class="sig-name descname"><span class="pre">create_from_fingerprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_map</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fingerprint_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ecfp4'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fingerprint_count_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ecfp4_count'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.TanimotoIndex.create_from_fingerprint" title="Permalink to this definition">¶</a></dt>
<dd><p>create the index from columns in a table_map encoded as binary fingerprints</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_map</strong> – TableMap that contains the arrow table</p></li>
<li><p><strong>fingerprint_column</strong> – name of the fingerprint column, defaults to ‘ecfp4’</p></li>
<li><p><strong>fingerprint_count_column</strong> – name of the fingerprint count column, defaults to ‘ecfp4_count’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.TanimotoIndex.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.TanimotoIndex.load" title="Permalink to this definition">¶</a></dt>
<dd><p>load the index</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> – name of the file to load the fingerprint in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.TanimotoIndex.optimize">
<span class="sig-name descname"><span class="pre">optimize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.TanimotoIndex.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>optimize the index</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.TanimotoIndex.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.TanimotoIndex.save" title="Permalink to this definition">¶</a></dt>
<dd><p>save the index</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> – name of file to save fingerprint in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.index.TanimotoIndex.search">
<span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hitlist_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_raw_score</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_list_query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predicate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.TanimotoIndex.search" title="Permalink to this definition">¶</a></dt>
<dd><p>search a series of query objects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>objects</strong> – the query objects to be searched or their fingerprints</p></li>
<li><p><strong>hitlist_size</strong> – the size of the hitlist returned</p></li>
<li><p><strong>epsilon</strong> – max search accuracy error</p></li>
<li><p><strong>with_raw_score</strong> – calculate and return the raw_score</p></li>
<li><p><strong>id_list</strong> – array-like for converting row numbers in search results to hit ids</p></li>
<li><p><strong>id_list_query</strong> – array-like for converting row numbers in search results to query ids</p></li>
<li><p><strong>predicate</strong> – filter array that is the result of a predicate query</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.index.dot_product">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.index.</span></span><span class="sig-name descname"><span class="pre">dot_product</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hit_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cosine_scores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hitlist_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.index.dot_product" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-masskit.utils.spectrum_writers">
<span id="masskit-utils-spectrum-writers-module"></span><h2>masskit.utils.spectrum_writers module<a class="headerlink" href="#module-masskit.utils.spectrum_writers" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.spectrum_writers.spectra_to_mgf">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.spectrum_writers.</span></span><span class="sig-name descname"><span class="pre">spectra_to_mgf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charge_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.spectrum_writers.spectra_to_mgf" title="Permalink to this definition">¶</a></dt>
<dd><p>write out an array-like of spectra in mgf format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – stream or filename to write out to.  will append</p></li>
<li><p><strong>spectra</strong> – name of the column containing the spectrum</p></li>
<li><p><strong>charge_list</strong> – list of charges for Mascot to search, otherwise use the CHARGE field</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.spectrum_writers.spectra_to_msp">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.spectrum_writers.</span></span><span class="sig-name descname"><span class="pre">spectra_to_msp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotate_peptide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ion_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.spectrum_writers.spectra_to_msp" title="Permalink to this definition">¶</a></dt>
<dd><p>write out an array-like of spectra  in msp format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – stream or filename to write out to.  will append</p></li>
<li><p><strong>spectra</strong> – map containing the spectrum</p></li>
<li><p><strong>annotate_peptide</strong> – annotate the spectra as peptide</p></li>
<li><p><strong>ion_types</strong> – ion types for annotation</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.spectrum_writers.spectra_to_mzxml">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.spectrum_writers.</span></span><span class="sig-name descname"><span class="pre">spectra_to_mzxml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mzxml_attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-07</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_id_as_scan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.spectrum_writers.spectra_to_mzxml" title="Permalink to this definition">¶</a></dt>
<dd><p>write out an array-like of spectra in mzxml format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – stream or filename to write out to.  will not append</p></li>
<li><p><strong>min_intensity</strong> – the minimum intensity value</p></li>
<li><p><strong>spectra</strong> – name of the column containing the spectrum</p></li>
<li><p><strong>mzxml_attributes</strong> – dict containing mzXML attributes</p></li>
<li><p><strong>use_id_as_scan</strong> – use spectrum.id instead of spectrum.scan</p></li>
<li><p><strong>compress</strong> – should the data be compressed?</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-masskit.utils.tablemap">
<span id="masskit-utils-tablemap-module"></span><h2>masskit.utils.tablemap module<a class="headerlink" href="#module-masskit.utils.tablemap" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.tablemap.</span></span><span class="sig-name descname"><span class="pre">ArrowLibraryMap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.tablemap.TableMap" title="masskit.utils.tablemap.TableMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">TableMap</span></code></a></p>
<p>wrapper for an arrow library</p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.create_dict">
<span class="sig-name descname"><span class="pre">create_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.create_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>create dict for row</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>idx</strong> – row number</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.from_mgf">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_mgf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.from_mgf" title="Permalink to this definition">¶</a></dt>
<dd><p>read in an mgf file and create an ArrowLibraryMap</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – filename or stream</p></li>
<li><p><strong>num</strong> – number of rows.  None means all</p></li>
<li><p><strong>title_fields</strong> – dict containing column names with corresponding regex to extract field values from the TITLE</p></li>
<li><p><strong>min_intensity</strong> – the minimum intensity to set the fingerprint bit</p></li>
<li><p><strong>spectrum_type</strong> – the type of spectrum file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ArrowLibraryMap</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.from_msp">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_msp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.from_msp" title="Permalink to this definition">¶</a></dt>
<dd><p>read in an msp file and create an ArrowLibraryMap</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – filename or stream</p></li>
<li><p><strong>num</strong> – number of rows.  None means all</p></li>
<li><p><strong>id_field</strong> – start value of the id field</p></li>
<li><p><strong>comment_fields</strong> – a Dict of regexes used to extract fields from the Comment field.  Form of the Dict is { comment_field_name: (regex, type, field_name)}.  For example {‘Filter’:(r’&#64;hcd(d+.?d* )’, float, ‘nce’)}</p></li>
<li><p><strong>min_intensity</strong> – the minimum intensity to set the fingerprint bit</p></li>
<li><p><strong>spectrum_type</strong> – the type of spectrum file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ArrowLibraryMap</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.from_parquet">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_parquet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">combine_chunks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.from_parquet" title="Permalink to this definition">¶</a></dt>
<dd><p>create an ArrowLibraryMap from a parquet file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – filename or stream</p></li>
<li><p><strong>columns</strong> – list of columns to read.  None=all, []=minimum set</p></li>
<li><p><strong>num</strong> – number of rows</p></li>
<li><p><strong>combine_chunks</strong> – dechunkify the arrow table to allow zero copy</p></li>
<li><p><strong>filters</strong> – parquet predicate as a list of tuples</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.from_sdf">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_sdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_expensive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_probabilities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.01,</span> <span class="pre">0.97,</span> <span class="pre">0.01,</span> <span class="pre">0.01)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.from_sdf" title="Permalink to this definition">¶</a></dt>
<dd><p>read in an sdf file and create an ArrowLibraryMap</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – filename or stream</p></li>
<li><p><strong>num</strong> – number of rows.  None means all</p></li>
<li><p><strong>skip_expensive</strong> – don’t compute fields that are computationally expensive</p></li>
<li><p><strong>max_size</strong> – the maximum bounding box size (used to filter out large molecules. 0=no bound)</p></li>
<li><p><strong>source</strong> – where did the sdf come from?  pubchem, nist, ?</p></li>
<li><p><strong>id_field</strong> – field to use for the mol id, such as NISTNO, ID or _NAME (the sdf title field). if an integer,
use the integer as the starting value for an assigned id</p></li>
<li><p><strong>min_intensity</strong> – the minimum intensity to set the fingerprint bit</p></li>
<li><p><strong>set_probabilities</strong> – how to divide into dev, train, valid, test</p></li>
<li><p><strong>spectrum_type</strong> – the type of spectrum file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ArrowLibraryMap</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.get_ids">
<span class="sig-name descname"><span class="pre">get_ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.get_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>get the ids of all records, in row order</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>array of ids</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.getitem_by_id">
<span class="sig-name descname"><span class="pre">getitem_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.getitem_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>get an item from the library by id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – id</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the row dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.getitem_by_row">
<span class="sig-name descname"><span class="pre">getitem_by_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.getitem_by_row" title="Permalink to this definition">¶</a></dt>
<dd><p>get an item from the library by id
:param key: row number
:return: the row dict</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.getrow_by_id">
<span class="sig-name descname"><span class="pre">getrow_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.getrow_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>given an id, return the corresponding row number in the table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – the id</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the row number of the id in the table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.to_arrow">
<span class="sig-name descname"><span class="pre">to_arrow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.to_arrow" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.to_csv">
<span class="sig-name descname"><span class="pre">to_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.to_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Write to csv file, skipping any spectrum column and writing mol columns as
canonical SMILES</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – filename or file pointer.  newline should be set to ‘’</p></li>
<li><p><strong>columns</strong> – list of columns to write out to csv file.  If none, all columns</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.to_mgf">
<span class="sig-name descname"><span class="pre">to_mgf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.to_mgf" title="Permalink to this definition">¶</a></dt>
<dd><p>save spectra to mgf file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – filename or file pointer</p></li>
<li><p><strong>spectrum_column</strong> – column name for spectrum</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.to_mzxml">
<span class="sig-name descname"><span class="pre">to_mzxml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_id_as_scan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.to_mzxml" title="Permalink to this definition">¶</a></dt>
<dd><p>save spectra to mzxml format file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – filename or stream</p></li>
<li><p><strong>use_id_as_scan</strong> – use spectrum.id instead of spectrum.scan</p></li>
<li><p><strong>spectrum_column</strong> – column name for spectrum</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.to_pandas">
<span class="sig-name descname"><span class="pre">to_pandas</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.to_pandas" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ArrowLibraryMap.to_parquet">
<span class="sig-name descname"><span class="pre">to_parquet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ArrowLibraryMap.to_parquet" title="Permalink to this definition">¶</a></dt>
<dd><p>save spectra to parquet file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> – filename or stream</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ListLibraryMap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.tablemap.</span></span><span class="sig-name descname"><span class="pre">ListLibraryMap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">list_in</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ListLibraryMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.tablemap.TableMap" title="masskit.utils.tablemap.TableMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">TableMap</span></code></a></p>
<p>wrapper for a spectral library using python lists</p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ListLibraryMap.create_dict">
<span class="sig-name descname"><span class="pre">create_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ListLibraryMap.create_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>create dict for row</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>idx</strong> – row number</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ListLibraryMap.get_ids">
<span class="sig-name descname"><span class="pre">get_ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ListLibraryMap.get_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>get the ids of all records, in row order</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>array of ids</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ListLibraryMap.getitem_by_id">
<span class="sig-name descname"><span class="pre">getitem_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ListLibraryMap.getitem_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>get an item from the library by id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – id</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the row dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ListLibraryMap.getitem_by_row">
<span class="sig-name descname"><span class="pre">getitem_by_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ListLibraryMap.getitem_by_row" title="Permalink to this definition">¶</a></dt>
<dd><p>get an item from the library by id
:param key: row number
:return: the row dict</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.ListLibraryMap.getrow_by_id">
<span class="sig-name descname"><span class="pre">getrow_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.ListLibraryMap.getrow_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>given an id, return the corresponding row number in the table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – the id</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the row number of the id in the table</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.tablemap.PandasLibraryMap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.tablemap.</span></span><span class="sig-name descname"><span class="pre">PandasLibraryMap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.PandasLibraryMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#masskit.utils.tablemap.TableMap" title="masskit.utils.tablemap.TableMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">TableMap</span></code></a></p>
<p>wrapper for a pandas spectral library</p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.PandasLibraryMap.create_dict">
<span class="sig-name descname"><span class="pre">create_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.PandasLibraryMap.create_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>create dict for row</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>idx</strong> – row number</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.PandasLibraryMap.get_ids">
<span class="sig-name descname"><span class="pre">get_ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.PandasLibraryMap.get_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>get the ids of all records, in row order</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>array of ids</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.PandasLibraryMap.getitem_by_id">
<span class="sig-name descname"><span class="pre">getitem_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.PandasLibraryMap.getitem_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>get an item from the library by id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – id</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the row dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.PandasLibraryMap.getitem_by_row">
<span class="sig-name descname"><span class="pre">getitem_by_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.PandasLibraryMap.getitem_by_row" title="Permalink to this definition">¶</a></dt>
<dd><p>get an item from the library by id
:param key: row number
:return: the row dict</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.PandasLibraryMap.getrow_by_id">
<span class="sig-name descname"><span class="pre">getrow_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.PandasLibraryMap.getrow_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>given an id, return the corresponding row number in the table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – the id</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the row number of the id in the table</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="masskit.utils.tablemap.TableMap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">masskit.utils.tablemap.</span></span><span class="sig-name descname"><span class="pre">TableMap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.TableMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>collections.abc.Sequence wrapper for a library.  Allows use of different stores, e.g. arrow or pandas</p>
<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.TableMap.create_dict">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.TableMap.create_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>create dict for row</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>idx</strong> – row number</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.TableMap.get_ids">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_ids</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.TableMap.get_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>get the ids of all records, in row order</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>array of ids</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.TableMap.getitem_by_id">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">getitem_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.TableMap.getitem_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>get an item from the library by id</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – id</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the row dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.TableMap.getitem_by_row">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">getitem_by_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.TableMap.getitem_by_row" title="Permalink to this definition">¶</a></dt>
<dd><p>get an item from the library by id
:param key: row number
:return: the row dict</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.TableMap.getrow_by_id">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">getrow_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.TableMap.getrow_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>given an id, return the corresponding row number in the table</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – the id</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the row number of the id in the table</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="masskit.utils.tablemap.TableMap.to_msp">
<span class="sig-name descname"><span class="pre">to_msp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annotate_peptide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ion_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tablemap.TableMap.to_msp" title="Permalink to this definition">¶</a></dt>
<dd><p>write out spectra in msp format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – file or filename to write to</p></li>
<li><p><strong>annotate_peptide</strong> – annotate the spectra as a peptide</p></li>
<li><p><strong>ion_types</strong> – ion types for annotation</p></li>
<li><p><strong>spectrum_column</strong> – column name for spectrum</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-masskit.utils.tables">
<span id="masskit-utils-tables-module"></span><h2>masskit.utils.tables module<a class="headerlink" href="#module-masskit.utils.tables" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.tables.create_dataset">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.tables.</span></span><span class="sig-name descname"><span class="pre">create_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">rows=5,</span> <span class="pre">cols=[&lt;class</span> <span class="pre">'int'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'float'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'str'&gt;,</span> <span class="pre">&lt;class</span> <span class="pre">'list'&gt;],</span> <span class="pre">names=array(['a',</span> <span class="pre">'b',</span> <span class="pre">'c',</span> <span class="pre">'d',</span> <span class="pre">'e',</span> <span class="pre">'f',</span> <span class="pre">'g',</span> <span class="pre">'h',</span> <span class="pre">'i',</span> <span class="pre">'j',</span> <span class="pre">'k',</span> <span class="pre">'l',</span> <span class="pre">'m',</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">'n',</span> <span class="pre">'o',</span> <span class="pre">'p',</span> <span class="pre">'q',</span> <span class="pre">'r',</span> <span class="pre">'s',</span> <span class="pre">'t',</span> <span class="pre">'u',</span> <span class="pre">'v',</span> <span class="pre">'w',</span> <span class="pre">'x',</span> <span class="pre">'y',</span> <span class="pre">'z',</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">'A',</span> <span class="pre">'B',</span> <span class="pre">'C',</span> <span class="pre">'D',</span> <span class="pre">'E',</span> <span class="pre">'F',</span> <span class="pre">'G',</span> <span class="pre">'H',</span> <span class="pre">'I',</span> <span class="pre">'J',</span> <span class="pre">'K',</span> <span class="pre">'L',</span> <span class="pre">'M',</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">'N',</span> <span class="pre">'O',</span> <span class="pre">'P',</span> <span class="pre">'Q',</span> <span class="pre">'R',</span> <span class="pre">'S',</span> <span class="pre">'T',</span> <span class="pre">'U',</span> <span class="pre">'V',</span> <span class="pre">'W',</span> <span class="pre">'X',</span> <span class="pre">'Y',</span> <span class="pre">'Z'],</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">dtype='&lt;U1')</span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tables.create_dataset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.tables.random_string">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.tables.</span></span><span class="sig-name descname"><span class="pre">random_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tables.random_string" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.tables.row_view">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.tables.</span></span><span class="sig-name descname"><span class="pre">row_view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tables.row_view" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.tables.row_view_raw">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.tables.</span></span><span class="sig-name descname"><span class="pre">row_view_raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tables.row_view_raw" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.tables.struct_to_table">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.tables.</span></span><span class="sig-name descname"><span class="pre">struct_to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tables.struct_to_table" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.tables.struct_view">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.tables.</span></span><span class="sig-name descname"><span class="pre">struct_view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tables.struct_view" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="masskit.utils.tables.table_to_struct">
<span class="sig-prename descclassname"><span class="pre">masskit.utils.tables.</span></span><span class="sig-name descname"><span class="pre">table_to_struct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#masskit.utils.tables.table_to_struct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-masskit.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-masskit.utils" title="Permalink to this heading">¶</a></h2>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">masskit.utils package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-masskit.utils.arrow">masskit.utils.arrow module</a></li>
<li><a class="reference internal" href="#module-masskit.utils.files">masskit.utils.files module</a></li>
<li><a class="reference internal" href="#module-masskit.utils.fingerprints">masskit.utils.fingerprints module</a></li>
<li><a class="reference internal" href="#module-masskit.utils.general">masskit.utils.general module</a></li>
<li><a class="reference internal" href="#module-masskit.utils.hitlist">masskit.utils.hitlist module</a></li>
<li><a class="reference internal" href="#module-masskit.utils.index">masskit.utils.index module</a></li>
<li><a class="reference internal" href="#module-masskit.utils.spectrum_writers">masskit.utils.spectrum_writers module</a></li>
<li><a class="reference internal" href="#module-masskit.utils.tablemap">masskit.utils.tablemap module</a></li>
<li><a class="reference internal" href="#module-masskit.utils.tables">masskit.utils.tables module</a></li>
<li><a class="reference internal" href="#module-masskit.utils">Module contents</a></li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/sources/masskit.utils.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">masskit 1.1.0-8-g811254f documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">masskit.utils package</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    </div>
  </body>
</html>